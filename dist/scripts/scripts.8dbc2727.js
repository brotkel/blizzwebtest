"use strict";angular.module("blizzwebtestApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","blizzwebtestApp.services","angularMoment","ng-breadcrumbs"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",label:"Home"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",label:"About"}).when("/search/tag/:tag",{templateUrl:"views/search.html",controller:"SearchCtrl",label:"Search"}).when("/question/:questionId",{templateUrl:"views/question.html",controller:"QuestionCtrl",label:"Question"}).otherwise({redirectTo:"/"})}]).filter("uniqueTags",function(){return function(a){var b={};angular.forEach(a,function(a){angular.forEach(a.tags,function(a){b[a]=1})});var c=[];for(var d in b)c.push(d);return c}}).directive("loading",["$http",function(a){return{restrict:"A",link:function(b,c){b.isLoading=function(){return a.pendingRequests.length>0},b.$watch(b.isLoading,function(a){a?(b.loading=!0,c.show()):(b.loading=!1,c.hide())})}}}]),$(function(){SE.init({clientId:3464,key:"x20eFwhSY2)G0cWDpQdYdg((",channelUrl:"http://localhost/blank.html",complete:function(){$("#login-button").removeAttr("disabled").text("Login")}})}),angular.module("blizzwebtestApp.services",[]).factory("seAPIService",["$http",function(a){var b={},c="x20eFwhSY2)G0cWDpQdYdg((";return b.getMe=function(b){return a({url:"https://api.stackexchange.com/2.2/me/"+b+"?key="+c+"&site=stackoverflow&access_token="+sessionStorage.accessToken})},b.getTags=function(){return a({url:"https://api.stackexchange.com/2.2/tags?key="+c+"&order=desc&sort=popular&site=stackoverflow"})},b.search=function(b,d,e){return d="undefined"!=typeof d?d:"desc",e="undefined"!=typeof e?e:"activity",a({url:"https://api.stackexchange.com/2.2/search?key="+c+"&order="+d+"&sort="+e+"&tagged="+b+"&site=stackoverflow"})},b.getQuestions=function(b,d){return a("comments"==d?{url:"https://api.stackexchange.com/2.2/questions/"+b+"/"+d+"?key="+c+"&order=desc&sort=creation&site=stackoverflow&filter=withbody"}:{url:"https://api.stackexchange.com/2.2/questions/"+b+"/"+d+"?key="+c+"&order=desc&sort=votes&site=stackoverflow&filter=withbody"})},b.getAnswers=function(b,d){return a({url:"https://api.stackexchange.com/2.2/answers/"+b+"/"+d+"?key="+c+"&order=desc&sort=creation&site=stackoverflow&filter=withbody"})},b.setFavorite=function(b,d){return a(1==d?{method:"POST",url:"https://api.stackexchange.com/2.2/questions/"+b+"/favorite",data:"site=stackoverflow&key="+c+"&access_token="+sessionStorage.accessToken,headers:{"Content-Type":"application/x-www-form-urlencoded"}}:{method:"POST",url:"https://api.stackexchange.com/2.2/questions/"+b+"/favorite/undo",data:"site=stackoverflow&key="+c+"&access_token="+sessionStorage.accessToken,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},b}]).service("seAuthService",function(){var a={};return a.authenticate=function(a){SE.authenticate({success:function(b){sessionStorage.accessToken=b.accessToken,a.reload()},error:function(a){alert("An error occurred:\n"+a.errorName+"\n"+a.errorMessage)},scope:["write_access"],networkUsers:!0})},a}),angular.module("blizzwebtestApp").controller("MainCtrl",["$scope","$rootScope","$route","seAPIService","seAuthService","breadcrumbs",function(a,b,c,d,e,f){b.breadcrumbs=f,b.loggedIn=sessionStorage.accessToken,a.myProfile=[],a.myBadges=[],a.myTimeline=[],a.myFavorites=[],a.tagCloud=[],b.authenticate=function(){e.authenticate(c)},b.loggedIn&&(d.getMe("").success(function(b){a.myProfile=b.items[0]}),d.getMe("badges").success(function(b){a.myBadges=b.items}),d.getMe("timeline").success(function(b){a.myTimeline=b.items}),d.getMe("favorites").success(function(b){a.myFavorites=b.items})),d.getTags().success(function(b){a.tagCloud=b.items})}]),angular.module("blizzwebtestApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("blizzwebtestApp").controller("SearchCtrl",["$scope","$rootScope","$route","$routeParams","$location","seAPIService","seAuthService","breadcrumbs",function(a,b,c,d,e,f,g,h){b.breadcrumbs=h,b.loggedIn=sessionStorage.accessToken,a.tags=[],a.searchQuestions=[],a.selectedTag=[],a.selectedOrder=[],a.selectedSort=[],a.orders=["asc","desc"],a.sorts=["activity","votes","creation","relevance"],b.authenticate=function(){g.authenticate(c)},f.getTags().success(function(b){a.tags=b.items;var c=$.grep(a.tags,function(a){return a.name==d.tag});0==c.length&&a.tags.push({name:d.tag})}),f.search(d.tag,d.order,d.sort).success(function(b){a.searchQuestions=b.items}),a.selectedTag.name=d.tag,a.selectedOrder=d.order?d.order:"desc",a.selectedSort=d.sort?d.sort:"activity",a.selectTag=function(a){e.path(a?"/search/tag/"+a.name:"/search/tag/")},a.selectOrder=function(a){e.search("order",a)},a.selectSort=function(a){e.search("sort",a)}}]),angular.module("blizzwebtestApp").controller("QuestionCtrl",["$scope","$rootScope","$route","$routeParams","$location","seAPIService","seAuthService","breadcrumbs",function(a,b,c,d,e,f,g,h){b.breadcrumbs=h,b.loggedIn=sessionStorage.accessToken,a.isFavorite=[],a.myFavorites=[],a.questions=[],a.questionComments=[],a.questionAnswers=[],a.answerIds=[],a.answerComments=[],b.authenticate=function(){g.authenticate(c)},f.getQuestions(d.questionId,"").success(function(b){a.questions=b.items,h.options={Question:a.questions[0].title}}),f.getQuestions(d.questionId,"comments").success(function(b){a.questionComments=b.items}),f.getQuestions(d.questionId,"answers").success(function(b){a.questionAnswers=b.items;for(var c=0;c<a.questionAnswers.length;c++)a.answerIds.push(a.questionAnswers[c].answer_id);var d=a.answerIds.join(";");f.getAnswers(d,"comments").success(function(b){a.answerComments=b.items})}),f.getMe("favorites").success(function(b){a.myFavorites=b.items;for(var c=0;c<a.myFavorites.length;c++)a.myFavorites[c].question_id==d.questionId&&(a.isFavorite=!0)}),a.favorite=function(){f.setFavorite(d.questionId,a.isFavorite).success(function(){})}}]);